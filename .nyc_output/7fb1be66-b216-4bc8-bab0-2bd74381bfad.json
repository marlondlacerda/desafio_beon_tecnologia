{"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/handler.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/handler.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":94}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":38}},"5":{"start":{"line":8,"column":22},"end":{"line":8,"column":46}},"6":{"start":{"line":9,"column":19},"end":{"line":9,"column":40}},"7":{"start":{"line":10,"column":17},"end":{"line":10,"column":36}},"8":{"start":{"line":11,"column":22},"end":{"line":11,"column":63}},"9":{"start":{"line":12,"column":19},"end":{"line":12,"column":49}},"10":{"start":{"line":13,"column":18},"end":{"line":13,"column":42}},"11":{"start":{"line":14,"column":20},"end":{"line":14,"column":57}},"12":{"start":{"line":15,"column":23},"end":{"line":15,"column":73}},"13":{"start":{"line":16,"column":19},"end":{"line":16,"column":99}},"14":{"start":{"line":17,"column":15},"end":{"line":22,"column":1}},"15":{"start":{"line":18,"column":19},"end":{"line":18,"column":47}},"16":{"start":{"line":19,"column":4},"end":{"line":20,"column":22}},"17":{"start":{"line":20,"column":8},"end":{"line":20,"column":22}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":40}},"19":{"start":{"line":23,"column":0},"end":{"line":23,"column":24}},"20":{"start":{"line":24,"column":13},"end":{"line":24,"column":40}},"21":{"start":{"line":24,"column":19},"end":{"line":24,"column":40}},"22":{"start":{"line":25,"column":0},"end":{"line":25,"column":20}},"23":{"start":{"line":26,"column":16},"end":{"line":31,"column":1}},"24":{"start":{"line":27,"column":19},"end":{"line":27,"column":49}},"25":{"start":{"line":28,"column":4},"end":{"line":29,"column":22}},"26":{"start":{"line":29,"column":8},"end":{"line":29,"column":22}},"27":{"start":{"line":30,"column":4},"end":{"line":30,"column":41}},"28":{"start":{"line":32,"column":0},"end":{"line":32,"column":26}},"29":{"start":{"line":33,"column":15},"end":{"line":41,"column":1}},"30":{"start":{"line":34,"column":21},"end":{"line":34,"column":51}},"31":{"start":{"line":35,"column":23},"end":{"line":35,"column":51}},"32":{"start":{"line":36,"column":4},"end":{"line":37,"column":24}},"33":{"start":{"line":37,"column":8},"end":{"line":37,"column":24}},"34":{"start":{"line":38,"column":4},"end":{"line":39,"column":26}},"35":{"start":{"line":39,"column":8},"end":{"line":39,"column":26}},"36":{"start":{"line":40,"column":4},"end":{"line":40,"column":40}},"37":{"start":{"line":42,"column":0},"end":{"line":42,"column":24}},"38":{"start":{"line":43,"column":18},"end":{"line":48,"column":1}},"39":{"start":{"line":44,"column":19},"end":{"line":44,"column":49}},"40":{"start":{"line":45,"column":4},"end":{"line":46,"column":22}},"41":{"start":{"line":46,"column":8},"end":{"line":46,"column":22}},"42":{"start":{"line":47,"column":4},"end":{"line":47,"column":43}},"43":{"start":{"line":49,"column":0},"end":{"line":49,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":15},"end":{"line":17,"column":16}},"loc":{"start":{"line":17,"column":32},"end":{"line":22,"column":1}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":13},"end":{"line":24,"column":14}},"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":40}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":16},"end":{"line":26,"column":17}},"loc":{"start":{"line":26,"column":33},"end":{"line":31,"column":1}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":33,"column":15},"end":{"line":33,"column":16}},"loc":{"start":{"line":33,"column":32},"end":{"line":41,"column":1}},"line":33},"5":{"name":"(anonymous_5)","decl":{"start":{"line":43,"column":18},"end":{"line":43,"column":19}},"loc":{"start":{"line":43,"column":35},"end":{"line":48,"column":1}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":19,"column":4},"end":{"line":20,"column":22}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":20,"column":22}},{"start":{"line":19,"column":4},"end":{"line":20,"column":22}}],"line":19},"4":{"loc":{"start":{"line":28,"column":4},"end":{"line":29,"column":22}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":29,"column":22}},{"start":{"line":28,"column":4},"end":{"line":29,"column":22}}],"line":28},"5":{"loc":{"start":{"line":36,"column":4},"end":{"line":37,"column":24}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":37,"column":24}},{"start":{"line":36,"column":4},"end":{"line":37,"column":24}}],"line":36},"6":{"loc":{"start":{"line":38,"column":4},"end":{"line":39,"column":26}},"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":39,"column":26}},{"start":{"line":38,"column":4},"end":{"line":39,"column":26}}],"line":38},"7":{"loc":{"start":{"line":45,"column":4},"end":{"line":46,"column":22}},"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":46,"column":22}},{"start":{"line":45,"column":4},"end":{"line":46,"column":22}}],"line":45}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":5,"16":5,"17":3,"18":2,"19":1,"20":1,"21":2,"22":1,"23":1,"24":2,"25":2,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":0,"34":1,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":0,"42":1,"43":1},"f":{"0":1,"1":5,"2":2,"3":2,"4":1,"5":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[3,2],"4":[1,1],"5":[0,1],"6":[0,1],"7":[0,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/handler.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/handler.ts"],"names":[],"mappings":";;;;;;AAEA,uCAA2D;AAC3D,+CAAuD;AAEvD,yCAAyC;AACzC,qCAAqC;AACrC,gEAA2C;AAG3C,MAAM,UAAU,GAAG,IAAI,wBAAU,EAAiB,CAAC;AACnD,MAAM,SAAS,GAAG,IAAI,kBAAS,EAAE,CAAC;AAClC,MAAM,WAAW,GAAG,IAAI,sBAAW,CAAC,SAAS,CAAC,CAAC;AAC/C,MAAM,cAAc,GAAG,IAAI,qBAAc,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;AAEnE,MAAM,UAAU,GAAG,IAAI,wBAAU,CAC/B,oBAAU,EACV,4BAAkB,CACnB,CAAC;AAEK,MAAM,MAAM,GAAY,KAAK,EAAE,KAAsB,EAAE,EAAE;IAC9D,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAE5C,IAAI,MAAM;QAAE,OAAO,MAAM,CAAC;IAE1B,OAAO,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AACtC,CAAC,CAAC;AANW,QAAA,MAAM,UAMjB;AAEK,MAAM,IAAI,GAAY,GAAG,EAAE,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;AAA5C,QAAA,IAAI,QAAwC;AAElD,MAAM,OAAO,GAAY,KAAK,EAAE,KAAsB,EAAE,EAAE;IAC/D,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAE9C,IAAI,MAAM;QAAE,OAAO,MAAM,CAAC;IAE1B,OAAO,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACvC,CAAC,CAAC;AANW,QAAA,OAAO,WAMlB;AAEK,MAAM,MAAM,GAAY,KAAK,EAAE,KAAsB,EAAE,EAAE;IAC9D,MAAM,QAAQ,GAAG,MAAM,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAChD,MAAM,UAAU,GAAG,MAAM,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAEhD,IAAI,QAAQ;QAAE,OAAO,QAAQ,CAAC;IAC9B,IAAI,UAAU;QAAE,OAAO,UAAU,CAAC;IAElC,OAAO,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AACtC,CAAC,CAAC;AARW,QAAA,MAAM,UAQjB;AAEK,MAAM,SAAS,GAAY,KAAK,EAAE,KAAsB,EAAE,EAAE;IACjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAE9C,IAAI,MAAM;QAAE,OAAO,MAAM,CAAC;IAE1B,OAAO,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;AACzC,CAAC,CAAC;AANW,QAAA,SAAS,aAMpB","sourcesContent":["import { APIGatewayEvent, Handler } from 'aws-lambda';\n\nimport { todoObjectIdSchema, todoSchema } from './schemas';\nimport { Validation, CacheRedis } from './middlewares';\n\nimport { TodoService } from './services';\nimport { TodoModel } from './models';\nimport TodoController from './controllers';\nimport { CreateTodoDTO } from './interfaces/CreateTodoDTO';\n\nconst cacheRedis = new CacheRedis<CreateTodoDTO>();\nconst todoModel = new TodoModel();\nconst todoService = new TodoService(todoModel);\nconst todoController = new TodoController(todoService, cacheRedis);\n\nconst validation = new Validation(\n  todoSchema,\n  todoObjectIdSchema,\n);\n\nexport const create: Handler = async (event: APIGatewayEvent) => {\n  const result = await validation.body(event);\n\n  if (result) return result;\n\n  return todoController.create(event);\n};\n\nexport const find: Handler = () => todoController.find();\n\nexport const findOne: Handler = async (event: APIGatewayEvent) => {\n  const result = await validation.params(event);\n\n  if (result) return result;\n\n  return todoController.findOne(event);\n};\n\nexport const update: Handler = async (event: APIGatewayEvent) => {\n  const resultId = await validation.params(event);\n  const resultBody = await validation.body(event);\n\n  if (resultId) return resultId;\n  if (resultBody) return resultBody;\n\n  return todoController.update(event);\n};\n\nexport const deleteOne: Handler = async (event: APIGatewayEvent) => {\n  const result = await validation.params(event);\n\n  if (result) return result;\n\n  return todoController.deleteOne(event);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b4394193bf309d4158a6261148ad4cdcc3585afc"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/schemas/index.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/schemas/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":19},"end":{"line":15,"column":1}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":126}},"13":{"start":{"line":14,"column":21},"end":{"line":14,"column":126}},"14":{"start":{"line":14,"column":95},"end":{"line":14,"column":126}},"15":{"start":{"line":16,"column":0},"end":{"line":16,"column":62}},"16":{"start":{"line":17,"column":0},"end":{"line":17,"column":47}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":50},"end":{"line":13,"column":51}},"loc":{"start":{"line":13,"column":71},"end":{"line":15,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":19},"end":{"line":15,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":20},"end":{"line":13,"column":24}},{"start":{"line":13,"column":28},"end":{"line":13,"column":45}},{"start":{"line":13,"column":50},"end":{"line":15,"column":1}}],"line":13},"9":{"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":126}},"type":"if","locations":[{"start":{"line":14,"column":21},"end":{"line":14,"column":126}},{"start":{"line":14,"column":21},"end":{"line":14,"column":126}}],"line":14},"10":{"loc":{"start":{"line":14,"column":25},"end":{"line":14,"column":93}},"type":"binary-expr","locations":[{"start":{"line":14,"column":25},"end":{"line":14,"column":40}},{"start":{"line":14,"column":44},"end":{"line":14,"column":93}}],"line":14}},"s":{"0":1,"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":0,"9":0,"10":0,"11":1,"12":1,"13":2,"14":2,"15":1,"16":1},"f":{"0":2,"1":2,"2":0,"3":1},"b":{"0":[1,1,1],"1":[1,0],"2":[2,0],"3":[2,0],"4":[2,2],"5":[0,2],"6":[2,0],"7":[0,0],"8":[1,1,1],"9":[2,0],"10":[2,2]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/schemas/index.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/schemas/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA,+CAA6B","sourcesContent":["export * from './todoSchema';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6bce9602c60dbd00f3c7e61eeafe5086143d36a1"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/schemas/todoSchema.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/schemas/todoSchema.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":57}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":20},"end":{"line":6,"column":41}},"4":{"start":{"line":5,"column":31},"end":{"line":6,"column":41}},"5":{"start":{"line":7,"column":0},"end":{"line":36,"column":3}},"6":{"start":{"line":37,"column":0},"end":{"line":41,"column":3}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":20},"end":{"line":5,"column":21}},"loc":{"start":{"line":5,"column":31},"end":{"line":6,"column":41}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":39},"end":{"line":12,"column":40}},"loc":{"start":{"line":12,"column":48},"end":{"line":16,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":40},"end":{"line":28,"column":41}},"loc":{"start":{"line":28,"column":49},"end":{"line":32,"column":5}},"line":28}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":4,"5":1,"6":1},"f":{"0":4,"1":6,"2":6},"b":{},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/schemas/todoSchema.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/schemas/todoSchema.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAExB,MAAM,WAAW,GAAG,CAAC,KAAa,EAAE,EAAE,CAAC,IAAI,KAAK;yCACP,CAAC;AAE7B,QAAA,UAAU,GAAG,OAAC,CAAC,MAAM,CAAC;IACjC,IAAI,EAAE,OAAC,CAAC,MAAM,CAAC;QACb,cAAc,EAAE,sBAAsB;QACtC,kBAAkB,EAAE,4BAA4B;KACjD,CAAC;IACF,cAAc,EAAE,OAAC,CAAC,UAAU,CAAC,CAAC,GAAG,EAAE,EAAE;QACnC,0BAA0B;QAC1B,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,YAAY,IAAI;YAAE,OAAO,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC;IAC3E,CAAC,EAAE,OAAC,CAAC,IAAI,CAAC;QACR,cAAc,EAAE,WAAW,CAAC,gBAAgB,CAAC;QAC7C,kBAAkB,EAAE,WAAW,CAAC,gBAAgB,CAAC;KAClD,CAAC,CAAC;IACH,SAAS,EAAE,OAAC,CAAC,IAAI,CAAC,CAAC,UAAU,EAAE,WAAW,CAAC,EAAE;QAC3C,cAAc,EAAE,2BAA2B;QAC3C,kBAAkB,EAAE,gDAAgD;KACrE,CAAC;IACF,QAAQ,EAAE,OAAC,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,EAAE;QAC3C,cAAc,EAAE,0BAA0B;QAC1C,kBAAkB,EAAE,gDAAgD;KACrE,CAAC;IACF,eAAe,EAAE,OAAC,CAAC,UAAU,CAAC,CAAC,GAAG,EAAE,EAAE;QACpC,0BAA0B;QAC1B,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,YAAY,IAAI;YAAE,OAAO,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC;IAC3E,CAAC,EAAE,OAAC,CAAC,IAAI,CAAC;QACR,cAAc,EAAE,WAAW,CAAC,iBAAiB,CAAC;QAC9C,kBAAkB,EAAE,WAAW,CAAC,iBAAiB,CAAC;KACnD,CAAC,CAAC;CACJ,CAAC,CAAC;AAIU,QAAA,kBAAkB,GAAG,OAAC,CAAC,MAAM,CAAC;IACzC,EAAE,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,mBAAmB,EAAE;QACxC,OAAO,EAAE,wCAAwC;KAClD,CAAC;CACH,CAAC,CAAC","sourcesContent":["import { z } from 'zod';\n\nconst dateMessage = (field: string) => `\"${field}\" deve ser uma data exemplo:\n\"YY/MM/DD\" ou \"2020-01-01T00:00:00.000Z\"`;\n\nexport const todoSchema = z.object({\n  name: z.string({\n    required_error: '\"name\" é obrigatório',\n    invalid_type_error: '\"name\" deve ser uma string',\n  }),\n  execution_date: z.preprocess((arg) => {\n    /* istanbul ignore next */\n    if (typeof arg === 'string' || arg instanceof Date) return new Date(arg);\n  }, z.date({\n    required_error: dateMessage('execution_date'),\n    invalid_type_error: dateMessage('execution_date'),\n  })),\n  situation: z.enum(['Pendente', 'Concluída'], {\n    required_error: '\"situation\" é obrigatória',\n    invalid_type_error: '\"situation\" deve ser \"Pendente\" ou \"Concluída\"',\n  }),\n  priority: z.enum(['Baixa', 'Média', 'Alta'], {\n    required_error: '\"priority\" é obrigatória',\n    invalid_type_error: '\"priority\" deve ser \"Baixa\", \"Média\" ou \"Alta\"',\n  }),\n  conclusion_date: z.preprocess((arg) => {\n    /* istanbul ignore next */\n    if (typeof arg === 'string' || arg instanceof Date) return new Date(arg);\n  }, z.date({\n    required_error: dateMessage('conclusion_date'),\n    invalid_type_error: dateMessage('conclusion_date'),\n  })),\n});\n\nexport type Todo = z.infer<typeof todoSchema>;\n\nexport const todoObjectIdSchema = z.object({\n  id: z.string().regex(/^[0-9a-fA-F]{24}$/, {\n    message: 'Id must have 24 hexadecimal characters',\n  }),\n});\n\nexport type TodoObjectId = z.infer<typeof todoObjectIdSchema>;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"340b4bdafec115f53da6de14a9ed65ef793aa6b0"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/index.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":49}},"4":{"start":{"line":7,"column":19},"end":{"line":7,"column":42}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":135}},"6":{"start":{"line":8,"column":84},"end":{"line":8,"column":129}},"7":{"start":{"line":9,"column":19},"end":{"line":9,"column":42}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":135}},"9":{"start":{"line":10,"column":84},"end":{"line":10,"column":129}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":70},"end":{"line":8,"column":71}},"loc":{"start":{"line":8,"column":82},"end":{"line":8,"column":131}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":70},"end":{"line":10,"column":71}},"loc":{"start":{"line":10,"column":82},"end":{"line":10,"column":131}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":2,"1":1,"2":1},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/index.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/index.ts"],"names":[],"mappings":";;;;;;AAAA,2CAAqD;AAA5C,yHAAA,OAAO,OAAc;AAC9B,2CAAqD;AAA5C,yHAAA,OAAO,OAAc","sourcesContent":["export { default as Validation } from './Validation';\nexport { default as CacheRedis } from './CacheRedis';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"40e98a6e721fac23afbc06c701bc9ca6aeb014bc"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/Validation.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/Validation.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":14},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":17},"end":{"line":6,"column":48}},"4":{"start":{"line":11,"column":8},"end":{"line":11,"column":37}},"5":{"start":{"line":12,"column":8},"end":{"line":12,"column":41}},"6":{"start":{"line":14,"column":11},"end":{"line":21,"column":5}},"7":{"start":{"line":15,"column":8},"end":{"line":20,"column":9}},"8":{"start":{"line":16,"column":12},"end":{"line":16,"column":58}},"9":{"start":{"line":19,"column":12},"end":{"line":19,"column":49}},"10":{"start":{"line":22,"column":13},"end":{"line":29,"column":5}},"11":{"start":{"line":23,"column":8},"end":{"line":28,"column":9}},"12":{"start":{"line":24,"column":12},"end":{"line":24,"column":58}},"13":{"start":{"line":27,"column":12},"end":{"line":27,"column":49}},"14":{"start":{"line":30,"column":27},"end":{"line":43,"column":5}},"15":{"start":{"line":32,"column":8},"end":{"line":38,"column":9}},"16":{"start":{"line":33,"column":32},"end":{"line":33,"column":47}},"17":{"start":{"line":34,"column":27},"end":{"line":36,"column":65}},"18":{"start":{"line":37,"column":12},"end":{"line":37,"column":53}},"19":{"start":{"line":45,"column":0},"end":{"line":45,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":42},"end":{"line":13,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":11},"end":{"line":14,"column":12}},"loc":{"start":{"line":14,"column":28},"end":{"line":21,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":13},"end":{"line":22,"column":14}},"loc":{"start":{"line":22,"column":30},"end":{"line":29,"column":5}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":27},"end":{"line":30,"column":28}},"loc":{"start":{"line":30,"column":38},"end":{"line":43,"column":5}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":32,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":38,"column":9}}],"line":32},"1":{"loc":{"start":{"line":34,"column":27},"end":{"line":36,"column":65}},"type":"cond-expr","locations":[{"start":{"line":35,"column":18},"end":{"line":35,"column":66}},{"start":{"line":36,"column":18},"end":{"line":36,"column":65}}],"line":34}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":6,"8":6,"9":3,"10":1,"11":4,"12":4,"13":1,"14":1,"15":4,"16":4,"17":4,"18":4,"19":1},"f":{"0":1,"1":6,"2":4,"3":4},"b":{"0":[4],"1":[1,3]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/Validation.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/Validation.ts"],"names":[],"mappings":";;AACA,6BAAuC;AACvC,oCAAoD;AAEpD,MAAM,QAAQ,GAAG,2DAA2D;MACxE,0CAA0C,CAAC;AAE/C,MAAM,UAAU;IAEK;IACA;IAFnB,YACmB,UAA2B,EAC3B,YAA6B;QAD7B,eAAU,GAAV,UAAU,CAAiB;QAC3B,iBAAY,GAAZ,YAAY,CAAiB;IAC7C,CAAC;IAEK,IAAI,GAAG,KAAK,EAAE,KAAsB,EAAE,EAAE;QAC/C,IAAI;YACF,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;SAC/C;QAAC,OAAO,GAAY,EAAE;YACrB,OAAO,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;SACtC;IACH,CAAC,CAAC;IAEO,MAAM,GAAG,KAAK,EAAE,KAAsB,EAAE,EAAE;QACjD,IAAI;YACF,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;SAC/C;QAAC,OAAO,GAAY,EAAE;YACrB,OAAO,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;SACtC;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,CAAC,KAAc,EAAE,EAAE;QACxC,0BAA0B;QAC1B,IAAI,KAAK,YAAY,cAAQ,EAAE;YAC7B,MAAM,EAAE,OAAO,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAEpC,MAAM,MAAM,GAAG,OAAO,KAAK,cAAc;gBACvC,CAAC,CAAC,IAAA,mBAAW,EAAC,YAAY,EAAE,QAAQ,CAAC;gBACrC,CAAC,CAAC,IAAA,mBAAW,EAAC,YAAY,EAAE,OAAO,CAAC,CAAC;YAEvC,OAAO,mBAAW,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;SAClC;QACD,0BAA0B;QAC1B,MAAM,GAAG,GAAG,IAAA,mBAAW,EAAC,YAAY,EAAE,cAAc,CAAC,CAAC;QACtD,0BAA0B;QAC1B,OAAO,mBAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC,CAAC;;AAGJ,kBAAe,UAAU,CAAC","sourcesContent":["import { APIGatewayEvent } from 'aws-lambda';\nimport { Schema, ZodError } from 'zod';\nimport { CreateError, MessageUtil } from '../utils';\n\nconst DATE_MSG = 'Data inválida ou não informada, exemplos de data válidas:'\n  + '\"YY/MM/DD\" ou \"2020-01-01T00:00:00.000Z\"';\n\nclass Validation {\n  constructor(\n    private readonly bodySchema: Schema<unknown>,\n    private readonly paramsSchema: Schema<unknown>,\n  ) {}\n\n  readonly body = async (event: APIGatewayEvent) => {\n    try {\n      this.bodySchema.parse(JSON.parse(event.body));\n    } catch (err: unknown) {\n      return Validation.responseError(err);\n    }\n  };\n\n  readonly params = async (event: APIGatewayEvent) => {\n    try {\n      this.paramsSchema.parse(event.pathParameters);\n    } catch (err: unknown) {\n      return Validation.responseError(err);\n    }\n  };\n\n  static responseError = (error: unknown) => {\n    /* istanbul ignore else */\n    if (error instanceof ZodError) {\n      const { message } = error.issues[0];\n\n      const result = message === 'Invalid date' \n        ? CreateError('badRequest', DATE_MSG) \n        : CreateError('badRequest', message);\n\n      return MessageUtil.error(result);\n    }\n    /* istanbul ignore next */\n    const err = CreateError('badRequest', 'invalid body');\n    /* istanbul ignore next */\n    return MessageUtil.error(err);\n  };\n}\n\nexport default Validation;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8df8bda68f4ead5ccff7eebf7ad3931d88fe5374"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/index.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":44}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":137}},"6":{"start":{"line":8,"column":85},"end":{"line":8,"column":131}},"7":{"start":{"line":9,"column":24},"end":{"line":9,"column":52}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":141}},"9":{"start":{"line":10,"column":85},"end":{"line":10,"column":135}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":71},"end":{"line":8,"column":72}},"loc":{"start":{"line":8,"column":83},"end":{"line":8,"column":133}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":71},"end":{"line":10,"column":72}},"loc":{"start":{"line":10,"column":83},"end":{"line":10,"column":137}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":16,"2":1,"3":1,"4":1,"5":1,"6":11,"7":1,"8":1,"9":5},"f":{"0":16,"1":11,"2":5},"b":{"0":[1,1,1],"1":[16,0],"2":[16,16]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/index.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/index.ts"],"names":[],"mappings":";;;;;;AAAA,6CAAuD;AAA9C,2HAAA,OAAO,OAAe;AAC/B,qDAA2D;AAAlD,+HAAA,OAAO,OAAe","sourcesContent":["export { default as MessageUtil } from './MessageUtil';\nexport { default as CreateError } from './createErrorUtil';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3a7c0cfd6e8fa5bfe3dc47a00369f9f504c08489"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/MessageUtil.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/MessageUtil.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":21},"end":{"line":6,"column":61}},"4":{"start":{"line":8,"column":0},"end":{"line":19,"column":36}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":56}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":56}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":60}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":66}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":60}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":58}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":58}},"13":{"start":{"line":17,"column":4},"end":{"line":17,"column":80}},"14":{"start":{"line":18,"column":4},"end":{"line":18,"column":52}},"15":{"start":{"line":24,"column":29},"end":{"line":24,"column":77}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":43}},"17":{"start":{"line":30,"column":23},"end":{"line":30,"column":43}},"18":{"start":{"line":46,"column":0},"end":{"line":46,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":1},"end":{"line":8,"column":2}},"loc":{"start":{"line":8,"column":23},"end":{"line":19,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":31},"end":{"line":26,"column":5}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":22},"end":{"line":44,"column":5}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":19,"column":3},"end":{"line":19,"column":34}},"type":"binary-expr","locations":[{"start":{"line":19,"column":3},"end":{"line":19,"column":13}},{"start":{"line":19,"column":18},"end":{"line":19,"column":33}}],"line":19}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":6,"16":6,"17":5,"18":1},"f":{"0":1,"1":1,"2":6,"3":5},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/MessageUtil.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/MessageUtil.ts"],"names":[],"mappings":";;;;;AACA,8DAAsC;AAEtC,IAAK,UAWJ;AAXD,WAAK,UAAU;IACb,mDAAa,CAAA;IACb,mDAAa,CAAA;IACb,uDAAe,CAAA;IACf,yDAAgB,CAAA;IAChB,6DAAkB,CAAA;IAClB,uDAAe,CAAA;IACf,qDAAc,CAAA;IACd,qDAAc,CAAA;IACd,2EAAyB,CAAA;IACzB,+CAAW,CAAA;AACb,CAAC,EAXI,UAAU,KAAV,UAAU,QAWd;AAED,MAAM,WAAW;IACf,MAAM,CAAC,OAAO,CAAC,IAAY,EAAE,IAAa;QACxC,qDAAqD;QACrD,qDAAqD;QACrD,MAAM,YAAY,GAAG,IAAI,oBAAU,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;QAE5D,OAAO,YAAY,CAAC,YAAY,EAAE,CAAC;IACrC,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,GAAU;QACrB,iDAAiD;QACjD,gDAAgD;QAChD,MAAM,MAAM,GAAG,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAEpC,0BAA0B;QAC1B,IAAI,MAAM,EAAE;YACV,MAAM,UAAU,GAAG,IAAI,oBAAU,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;YAClE,OAAO,UAAU,CAAC,YAAY,EAAE,CAAC;SAClC;QAED,8CAA8C;QAC9C,wEAAwE;QACxE,0BAA0B;QAC1B,MAAM,MAAM,GAAG,IAAI,oBAAU,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;QACxE,0BAA0B;QAC1B,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACjB,0BAA0B;QAC1B,OAAO,MAAM,CAAC,YAAY,EAAE,CAAC;IAC/B,CAAC;CACF;AAED,kBAAe,WAAW,CAAC","sourcesContent":["import { ResponseVO } from '../interfaces';\nimport ResultUtil from './ResultUtil';\n\nenum StatusCode {\n  success = 200,\n  created = 201,\n  noContent = 204,\n  badRequest = 400,\n  unauthorized = 401,\n  forbidden = 403,\n  notFound = 404,\n  conflict = 409,\n  unprocessableEntity = 422,\n  error = 500,\n}\n\nclass MessageUtil {\n  static success(code: string, data?: object): ResponseVO {\n    // Caso as requisições forem um sucesso, ele retorna \n    // um objeto com status positivo, 200, 201, 204, etc.\n    const resultSucess = new ResultUtil(StatusCode[code], data);\n\n    return resultSucess.bodyToString();\n  }\n\n  static error(err: Error) {\n    // Caso as requisições forem um erro, ele retorna\n    // um objeto com status negativo, 500, 404, etc.\n    const status = StatusCode[err.name];\n\n    /* istanbul ignore next */\n    if (status) {\n      const resultFail = new ResultUtil(status, { error: err.message });\n      return resultFail.bodyToString();\n    } \n\n    // Caso não seja um erro do tipo especificado,\n    // ele retorna um erro genérico com status 500 e um console.log do erro!\n    /* istanbul ignore next */\n    const result = new ResultUtil(StatusCode.error, { error: err.message });\n    /* istanbul ignore next */\n    console.log(err);\n    /* istanbul ignore next */\n    return result.bodyToString();\n  }\n}\n\nexport default MessageUtil;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3468091549ca5e2a7b545c772830a838bd73b274"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/ResultUtil.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/ResultUtil.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":7,"column":8},"end":{"line":7,"column":37}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"3":{"start":{"line":11,"column":8},"end":{"line":14,"column":10}},"4":{"start":{"line":17,"column":0},"end":{"line":17,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":37},"end":{"line":9,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":19},"end":{"line":15,"column":5}},"line":10}},"branchMap":{},"s":{"0":1,"1":11,"2":11,"3":11,"4":1},"f":{"0":11,"1":11},"b":{},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/ResultUtil.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/ResultUtil.ts"],"names":[],"mappings":";;AAAA,MAAM,UAAU;IACN,UAAU,CAAS;IAEnB,OAAO,CAAc;IAE7B,YAAY,UAAkB,EAAE,OAAoB;QAClD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAED,YAAY;QACV,OAAO;YACL,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC;SACnC,CAAC;IACJ,CAAC;CACF;AAED,kBAAe,UAAU,CAAC","sourcesContent":["class ResultUtil {\n  private statusCode: number;\n\n  private message: object | [];\n\n  constructor(statusCode: number, message: object | []) {\n    this.statusCode = statusCode;\n    this.message = message;\n  }\n\n  bodyToString() {\n    return {\n      statusCode: this.statusCode,\n      body: JSON.stringify(this.message),\n    };\n  }\n}\n\nexport default ResultUtil;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"eae33bae0020151bb2385779681a455a55d610aa"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/createErrorUtil.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/createErrorUtil.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":8,"column":1}},"2":{"start":{"line":4,"column":18},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":22}},"4":{"start":{"line":6,"column":4},"end":{"line":6,"column":28}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":20},"end":{"line":3,"column":21}},"loc":{"start":{"line":3,"column":39},"end":{"line":8,"column":1}},"line":3}},"branchMap":{},"s":{"0":1,"1":1,"2":5,"3":5,"4":5,"5":5,"6":1},"f":{"0":5},"b":{},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/createErrorUtil.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/utils/createErrorUtil.ts"],"names":[],"mappings":";;AAAA,MAAM,WAAW,GAAG,CAAC,IAAY,EAAE,OAAe,EAAE,EAAE;IACpD,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;IAC1B,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;IAClB,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;IACxB,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF,kBAAe,WAAW,CAAC","sourcesContent":["const createError = (code: string, message: string) => {\n  const error = new Error();\n  error.name = code;\n  error.message = message;\n  return error;\n};\n\nexport default createError;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6c1cb17a936ea163cb61d82d063404daaf8f7f29"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/CacheRedis.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/CacheRedis.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}},"5":{"start":{"line":8,"column":15},"end":{"line":13,"column":1}},"6":{"start":{"line":17,"column":8},"end":{"line":17,"column":51}},"7":{"start":{"line":19,"column":10},"end":{"line":22,"column":5}},"8":{"start":{"line":20,"column":22},"end":{"line":20,"column":47}},"9":{"start":{"line":21,"column":8},"end":{"line":21,"column":48}},"10":{"start":{"line":24,"column":8},"end":{"line":24,"column":73}},"11":{"start":{"line":27,"column":8},"end":{"line":27,"column":35}},"12":{"start":{"line":30,"column":21},"end":{"line":30,"column":105}},"13":{"start":{"line":30,"column":79},"end":{"line":30,"column":104}},"14":{"start":{"line":31,"column":8},"end":{"line":31,"column":36}},"15":{"start":{"line":34,"column":0},"end":{"line":34,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":18},"end":{"line":18,"column":5}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":10},"end":{"line":19,"column":11}},"loc":{"start":{"line":19,"column":25},"end":{"line":22,"column":5}},"line":19},"3":{"name":"(anonymous_3)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":29},"end":{"line":25,"column":5}},"line":23},"4":{"name":"(anonymous_4)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":13},"end":{"line":28,"column":5}},"line":26},"5":{"name":"(anonymous_5)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":28},"end":{"line":32,"column":5}},"line":29},"6":{"name":"(anonymous_6)","decl":{"start":{"line":30,"column":70},"end":{"line":30,"column":71}},"loc":{"start":{"line":30,"column":79},"end":{"line":30,"column":104}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":21,"column":15},"end":{"line":21,"column":47}},"type":"cond-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":40}},{"start":{"line":21,"column":43},"end":{"line":21,"column":47}}],"line":21}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":3,"9":3,"10":3,"11":2,"12":0,"13":0,"14":0,"15":1},"f":{"0":1,"1":1,"2":3,"3":3,"4":2,"5":0,"6":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[2,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/CacheRedis.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/middlewares/CacheRedis.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8C;AAE9C,OAAO,CAAC,eAAe,CAAC,CAAC;AAEzB,MAAM,MAAM,GAAiB;IAC3B,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU;IAC5B,IAAI,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;IACpC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc;IACpC,SAAS,EAAE,QAAQ;CACpB,CAAC;AAEF,MAAM,UAAU;IACN,KAAK,CAAQ;IAErB;QACE,IAAI,CAAC,KAAK,GAAG,IAAI,iBAAK,CAAC,MAAM,CAAC,CAAC;IACjC,CAAC;IAEQ,GAAG,GAAG,KAAK,EAAE,GAAW,EAAE,EAAE;QACnC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAExC,OAAO,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAC1C,CAAC,CAAC;IAEF,GAAG,CAAC,GAAW,EAAE,KAAmB,EAAE,OAAe;QACnD,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IACnE,CAAC;IAED,GAAG,CAAC,GAAW;QACb,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC7B,CAAC;IAED,KAAK,CAAC,SAAS,CAAC,MAAc;QAC5B,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,MAAM,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CACpE,GAAG,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC;QAE7B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;CACF;AAED,kBAAe,UAAU,CAAC","sourcesContent":["import Redis, { RedisOptions } from 'ioredis';\n\nrequire('dotenv/config');\n\nconst config: RedisOptions = {\n  host: process.env.REDIS_HOST,\n  port: Number(process.env.REDIS_PORT),\n  password: process.env.REDIS_PASSWORD,\n  keyPrefix: 'cache:',\n};\n\nclass CacheRedis<T> {\n  private redis: Redis;\n\n  constructor() {\n    this.redis = new Redis(config);\n  }\n\n  readonly get = async (key: string) => {\n    const value = await this.redis.get(key);\n\n    return value ? JSON.parse(value) : null;\n  };\n\n  set(key: string, value: T[] | object, timeExp: number) {\n    return this.redis.set(key, JSON.stringify(value), 'EX', timeExp);\n  }\n\n  del(key: string) {\n    return this.redis.del(key);\n  }\n\n  async delPrefix(prefix: string) {\n    const keys = (await this.redis.keys(`cache:${prefix}:*`)).map((key) =>\n      key.replace('cache:', ''));\n\n    return this.redis.del(keys);\n  }\n}\n\nexport default CacheRedis;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"290b0fd2a0c4b8d9315185182cb2bb07dad70476"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/index.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":55}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":36}},"6":{"start":{"line":9,"column":20},"end":{"line":9,"column":44}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":137}},"8":{"start":{"line":10,"column":85},"end":{"line":10,"column":131}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":71},"end":{"line":10,"column":72}},"loc":{"start":{"line":10,"column":83},"end":{"line":10,"column":133}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":2,"1":1},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/index.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/index.ts"],"names":[],"mappings":";;;;;;AAAA,wDAAgC;AAIvB,kBAJF,iBAAO,CAIE;AAFhB,6CAAuD;AAA9C,2HAAA,OAAO,OAAe","sourcesContent":["import Service from './Service';\n\nexport { default as TodoService } from './TodoService';\n\nexport { Service };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2581e79b04daf8217459792185d0eb4b367f8fd3"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/Service.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/Service.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":6,"column":8},"end":{"line":6,"column":27}},"2":{"start":{"line":8,"column":13},"end":{"line":8,"column":52}},"3":{"start":{"line":8,"column":29},"end":{"line":8,"column":52}},"4":{"start":{"line":9,"column":11},"end":{"line":9,"column":40}},"5":{"start":{"line":9,"column":23},"end":{"line":9,"column":40}},"6":{"start":{"line":10,"column":14},"end":{"line":10,"column":50}},"7":{"start":{"line":10,"column":28},"end":{"line":10,"column":50}},"8":{"start":{"line":11,"column":13},"end":{"line":11,"column":60}},"9":{"start":{"line":11,"column":33},"end":{"line":11,"column":60}},"10":{"start":{"line":12,"column":13},"end":{"line":12,"column":48}},"11":{"start":{"line":12,"column":27},"end":{"line":12,"column":48}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":23},"end":{"line":7,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":13},"end":{"line":8,"column":14}},"loc":{"start":{"line":8,"column":29},"end":{"line":8,"column":52}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":11},"end":{"line":9,"column":12}},"loc":{"start":{"line":9,"column":23},"end":{"line":9,"column":40}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":10,"column":14},"end":{"line":10,"column":15}},"loc":{"start":{"line":10,"column":28},"end":{"line":10,"column":50}},"line":10},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":13},"end":{"line":11,"column":14}},"loc":{"start":{"line":11,"column":33},"end":{"line":11,"column":60}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":12,"column":13},"end":{"line":12,"column":14}},"loc":{"start":{"line":12,"column":27},"end":{"line":12,"column":48}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":2,"4":1,"5":1,"6":1,"7":0,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{"0":1,"1":2,"2":1,"3":0,"4":1,"5":1},"b":{},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/Service.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/Service.ts"],"names":[],"mappings":";;AAOA,MAAe,OAAO;IAER;IADZ,YACY,KAAoB;QAApB,UAAK,GAAL,KAAK,CAAe;IAC5B,CAAC;IAEI,MAAM,GAAG,KAAK,EAAE,IAAO,EAAmB,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAErE,IAAI,GAAG,KAAK,IAAkB,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IAEnD,OAAO,GAAG,KAAK,EAAE,EAAU,EAA0B,EAAE,CAC9D,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;IAEhB,MAAM,GAAG,KAAK,EAAE,EAAU,EAAE,IAAO,EAA0B,EAAE,CACtE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;IAErB,MAAM,GAAG,KAAK,EAAE,EAAU,EAA0B,EAAE,CAC7D,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;CACzB;AAED,kBAAe,OAAO,CAAC","sourcesContent":["import { ZodError } from 'zod';\nimport { MongoModel } from '../models';\n\nexport interface ServiceError {\n  error: ZodError;\n}\n\nabstract class Service<T> {\n  constructor(\n    protected model: MongoModel<T>,\n  ) { }\n\n  readonly create = async (data: T): Promise<object> => this.model.create(data);\n\n  readonly read = async (): Promise<T[]> => this.model.read();\n\n  readonly readOne = async (id: string): Promise<object | null> =>\n    this.model.readOne(id);\n\n  readonly update = async (id: string, data: T): Promise<object | null> =>\n    this.model.update(id, data);\n\n  readonly delete = async (id: string): Promise<object | null> => \n    this.model.delete(id);\n}\n\nexport default Service;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"90f4ad7ad4af965ce38de2897b9b28dc8c8a3bf2"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/TodoService.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/TodoService.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":55}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":21}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":27}},"6":{"start":{"line":14,"column":0},"end":{"line":14,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":23},"end":{"line":12,"column":5}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{"0":1,"1":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/TodoService.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/services/TodoService.ts"],"names":[],"mappings":";;;;;AAEA,wDAAgC;AAEhC,MAAM,WAAY,SAAQ,iBAAa;IAE1B;IADX,YACW,KAAgB;QAEzB,KAAK,CAAC,KAAK,CAAC,CAAC;QAFJ,UAAK,GAAL,KAAK,CAAW;IAG3B,CAAC;CACF;AAED,kBAAe,WAAW,CAAC","sourcesContent":["import { TodoModel } from '../models';\nimport { Todo } from '../schemas';\nimport Service from './Service';\n\nclass TodoService extends Service<Todo> {\n  constructor(\n    readonly model: TodoModel,\n  ) {\n    super(model);\n  }\n}\n\nexport default TodoService;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cfd7b82e3d657d6195dd68778870035477e17bf9"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/index.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":48}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":61}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":42}},"6":{"start":{"line":9,"column":18},"end":{"line":9,"column":40}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":133}},"8":{"start":{"line":10,"column":83},"end":{"line":10,"column":127}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":69},"end":{"line":10,"column":70}},"loc":{"start":{"line":10,"column":81},"end":{"line":10,"column":129}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":2},"f":{"0":3,"1":2},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/index.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/index.ts"],"names":[],"mappings":";;;;;;AAAA,8DAAsC;AAI7B,qBAJF,oBAAU,CAIE;AAFnB,yCAAmD;AAA1C,uHAAA,OAAO,OAAa","sourcesContent":["import MongoModel from './MongoModel';\n\nexport { default as TodoModel } from './TodoModel';\n\nexport { MongoModel };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2cf62b4783de5843cc70aaf6300e291b553117bd"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/MongoModel.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/MongoModel.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":53}},"4":{"start":{"line":9,"column":24},"end":{"line":9,"column":47}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":27}},"6":{"start":{"line":13,"column":13},"end":{"line":13,"column":59}},"7":{"start":{"line":13,"column":29},"end":{"line":13,"column":59}},"8":{"start":{"line":14,"column":11},"end":{"line":14,"column":40}},"9":{"start":{"line":14,"column":23},"end":{"line":14,"column":40}},"10":{"start":{"line":15,"column":14},"end":{"line":15,"column":59}},"11":{"start":{"line":15,"column":28},"end":{"line":15,"column":59}},"12":{"start":{"line":16,"column":13},"end":{"line":16,"column":101}},"13":{"start":{"line":16,"column":33},"end":{"line":16,"column":101}},"14":{"start":{"line":17,"column":13},"end":{"line":17,"column":59}},"15":{"start":{"line":17,"column":27},"end":{"line":17,"column":59}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":23},"end":{"line":12,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":13},"end":{"line":13,"column":14}},"loc":{"start":{"line":13,"column":29},"end":{"line":13,"column":59}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":11},"end":{"line":14,"column":12}},"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":40}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":14},"end":{"line":15,"column":15}},"loc":{"start":{"line":15,"column":28},"end":{"line":15,"column":59}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":16,"column":13},"end":{"line":16,"column":14}},"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":101}},"line":16},"6":{"name":"(anonymous_6)","decl":{"start":{"line":17,"column":13},"end":{"line":17,"column":14}},"loc":{"start":{"line":17,"column":27},"end":{"line":17,"column":59}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":2,"7":2,"8":2,"9":1,"10":2,"11":0,"12":2,"13":1,"14":2,"15":1,"16":1},"f":{"0":1,"1":2,"2":2,"3":1,"4":0,"5":1,"6":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/MongoModel.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/MongoModel.ts"],"names":[],"mappings":";;;;;AAEA,sDAAyC;AAEzC,MAAe,UAAU;IAGD;IAFtB,MAAM,CAAC,UAAU,GAAG,IAAA,gBAAiB,GAAE,CAAC;IAExC,YAAsB,KAAsB;QAAtB,UAAK,GAAL,KAAK,CAAiB;IAAG,CAAC;IAEvC,MAAM,GAAG,KAAK,EAAE,IAAO,EAAmB,EAAE,CACnD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,EAAE,CAAC,CAAC;IAExB,IAAI,GAAG,KAAK,IAAkB,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IAEnD,OAAO,GAAG,KAAK,EAAE,EAAU,EAA0B,EAAE,CAC9D,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;IAEzB,MAAM,GAAG,KAAK,EAAE,EAAU,EAAE,IAAO,EAA0B,EAAE,CACtE,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;IAE9D,MAAM,GAAG,KAAK,EAAE,EAAU,EAA0B,EAAE,CAC7D,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;;AAGrC,kBAAe,UAAU,CAAC","sourcesContent":["import { Model as M, Document } from 'mongoose';\nimport { ModelInterface } from '../interfaces';\nimport connectToDatabase from './config';\n\nabstract class MongoModel<T> implements ModelInterface<T> {\n  static connection = connectToDatabase();\n\n  constructor(protected model: M<T & Document>) {}\n\n  readonly create = async (data: T): Promise<object> => \n    this.model.create({ ...data });\n\n  readonly read = async (): Promise<T[]> => this.model.find();\n\n  readonly readOne = async (id: string): Promise<object | null> => \n    this.model.findOne({ _id: id });\n\n  readonly update = async (id: string, data: T): Promise<object | null> => \n    this.model.findOneAndUpdate({ _id: id }, { ...data }, { new: true });\n\n  readonly delete = async (id: string): Promise<object | null> =>\n    this.model.findByIdAndDelete(id);\n}\n\nexport default MongoModel;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8580bd1adbb7b331093a98d616b68d247225670e"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/TodoModel.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/TodoModel.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":38}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":61}},"5":{"start":{"line":8,"column":19},"end":{"line":16,"column":2}},"6":{"start":{"line":20,"column":8},"end":{"line":20,"column":21}},"7":{"start":{"line":21,"column":8},"end":{"line":21,"column":27}},"8":{"start":{"line":24,"column":0},"end":{"line":24,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":95},"end":{"line":22,"column":5}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":93}},"type":"default-arg","locations":[{"start":{"line":19,"column":24},"end":{"line":19,"column":93}}],"line":19},"4":{"loc":{"start":{"line":19,"column":24},"end":{"line":19,"column":93}},"type":"binary-expr","locations":[{"start":{"line":19,"column":24},"end":{"line":19,"column":47}},{"start":{"line":19,"column":51},"end":{"line":19,"column":93}}],"line":19}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":2,"8":1},"f":{"0":1,"1":2},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[2],"4":[2,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/TodoModel.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/models/TodoModel.ts"],"names":[],"mappings":";;;;;AAAA,uCAA0E;AAC1E,8DAAsC;AAKtC,MAAM,UAAU,GAAG,IAAI,iBAAM,CAAe;IAC1C,IAAI,EAAE,MAAM;IACZ,cAAc,EAAE,IAAI;IACpB,SAAS,EAAE,MAAM;IACjB,QAAQ,EAAE,MAAM;IAChB,eAAe,EAAE,IAAI;CACtB,EAAE;IACD,UAAU,EAAE,KAAK;CAClB,CAAC,CAAC;AAEH,MAAM,SAAU,SAAQ,oBAAgB;IACnB;IAAnB,YAAmB,QAAQ,iBAAM,CAAC,KAAK,IAAI,IAAA,gBAAW,EAAC,OAAO,EAAE,UAAU,CAAC;QACzE,KAAK,CAAC,KAAK,CAAC,CAAC;QADI,UAAK,GAAL,KAAK,CAAmD;IAE3E,CAAC;CACF;AAED,kBAAe,SAAS,CAAC","sourcesContent":["import { Schema, model as createModel, Document, models } from 'mongoose';\nimport MongoModel from './MongoModel';\nimport { Todo } from '../schemas';\n\ninterface TodoDocument extends Todo, Document { }\n\nconst todoSchema = new Schema<TodoDocument>({\n  name: String,\n  execution_date: Date,\n  situation: String,\n  priority: String,\n  conclusion_date: Date,\n}, {\n  versionKey: false,\n});\n\nclass TodoModel extends MongoModel<Todo> {\n  constructor(public model = models.todos || createModel('todos', todoSchema)) {\n    super(model);\n  }\n}\n\nexport default TodoModel;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8279a073f597d17ea315e2cd70f05c6cde5975a3"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/index.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":25},"end":{"line":6,"column":69}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":43}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/index.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/index.ts"],"names":[],"mappings":";;;;;AAAA,sEAA8C;AAE9C,kBAAe,wBAAc,CAAC","sourcesContent":["import TodoController from './TodoController';\n\nexport default TodoController;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1e0be5c96ce988d359947ae5a7b207a315781250"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/TodoController.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/TodoController.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":21},"end":{"line":6,"column":61}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/TodoController.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/TodoController.ts"],"names":[],"mappings":";;;;;AAAA,8DAAsC;AAGtC,MAAM,cAAe,SAAQ,oBAAgB;CAAG;AAEhD,kBAAe,cAAc,CAAC","sourcesContent":["import Controller from './Controller';\nimport { Todo } from '../schemas';\n\nclass TodoController extends Controller<Todo> {}\n\nexport default TodoController;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ae85a086e5d9d9fe629a864e6a1de10113e7a724"},"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/Controller.ts":{"path":"/home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/Controller.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":30},"end":{"line":4,"column":53}},"3":{"start":{"line":9,"column":8},"end":{"line":9,"column":31}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":37}},"5":{"start":{"line":12,"column":13},"end":{"line":24,"column":5}},"6":{"start":{"line":13,"column":23},"end":{"line":13,"column":45}},"7":{"start":{"line":14,"column":8},"end":{"line":23,"column":9}},"8":{"start":{"line":15,"column":27},"end":{"line":15,"column":60}},"9":{"start":{"line":16,"column":27},"end":{"line":16,"column":33}},"10":{"start":{"line":17,"column":12},"end":{"line":17,"column":60}},"11":{"start":{"line":18,"column":12},"end":{"line":18,"column":66}},"12":{"start":{"line":21,"column":26},"end":{"line":21,"column":77}},"13":{"start":{"line":22,"column":12},"end":{"line":22,"column":52}},"14":{"start":{"line":25,"column":11},"end":{"line":39,"column":5}},"15":{"start":{"line":26,"column":8},"end":{"line":38,"column":9}},"16":{"start":{"line":27,"column":27},"end":{"line":27,"column":62}},"17":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"18":{"start":{"line":29,"column":16},"end":{"line":29,"column":69}},"19":{"start":{"line":31,"column":27},"end":{"line":31,"column":52}},"20":{"start":{"line":32,"column":12},"end":{"line":32,"column":54}},"21":{"start":{"line":33,"column":12},"end":{"line":33,"column":66}},"22":{"start":{"line":36,"column":26},"end":{"line":36,"column":82}},"23":{"start":{"line":37,"column":12},"end":{"line":37,"column":52}},"24":{"start":{"line":40,"column":14},"end":{"line":59,"column":5}},"25":{"start":{"line":41,"column":23},"end":{"line":41,"column":43}},"26":{"start":{"line":42,"column":23},"end":{"line":42,"column":64}},"27":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"28":{"start":{"line":44,"column":12},"end":{"line":44,"column":65}},"29":{"start":{"line":46,"column":8},"end":{"line":58,"column":9}},"30":{"start":{"line":47,"column":27},"end":{"line":47,"column":57}},"31":{"start":{"line":48,"column":12},"end":{"line":51,"column":13}},"32":{"start":{"line":49,"column":30},"end":{"line":49,"column":93}},"33":{"start":{"line":50,"column":16},"end":{"line":50,"column":56}},"34":{"start":{"line":52,"column":12},"end":{"line":52,"column":65}},"35":{"start":{"line":53,"column":12},"end":{"line":53,"column":66}},"36":{"start":{"line":56,"column":26},"end":{"line":56,"column":82}},"37":{"start":{"line":57,"column":12},"end":{"line":57,"column":52}},"38":{"start":{"line":60,"column":13},"end":{"line":77,"column":5}},"39":{"start":{"line":61,"column":24},"end":{"line":61,"column":47}},"40":{"start":{"line":62,"column":23},"end":{"line":62,"column":45}},"41":{"start":{"line":63,"column":8},"end":{"line":76,"column":9}},"42":{"start":{"line":64,"column":27},"end":{"line":64,"column":69}},"43":{"start":{"line":65,"column":12},"end":{"line":68,"column":13}},"44":{"start":{"line":66,"column":30},"end":{"line":66,"column":93}},"45":{"start":{"line":67,"column":16},"end":{"line":67,"column":56}},"46":{"start":{"line":69,"column":27},"end":{"line":69,"column":33}},"47":{"start":{"line":70,"column":12},"end":{"line":70,"column":65}},"48":{"start":{"line":71,"column":12},"end":{"line":71,"column":60}},"49":{"start":{"line":74,"column":26},"end":{"line":74,"column":82}},"50":{"start":{"line":75,"column":12},"end":{"line":75,"column":52}},"51":{"start":{"line":78,"column":16},"end":{"line":89,"column":5}},"52":{"start":{"line":79,"column":23},"end":{"line":79,"column":43}},"53":{"start":{"line":80,"column":8},"end":{"line":88,"column":9}},"54":{"start":{"line":81,"column":12},"end":{"line":81,"column":42}},"55":{"start":{"line":82,"column":12},"end":{"line":82,"column":48}},"56":{"start":{"line":83,"column":12},"end":{"line":83,"column":42}},"57":{"start":{"line":84,"column":12},"end":{"line":84,"column":60}},"58":{"start":{"line":87,"column":12},"end":{"line":87,"column":50}},"59":{"start":{"line":91,"column":0},"end":{"line":91,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":37},"end":{"line":11,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":13},"end":{"line":12,"column":14}},"loc":{"start":{"line":12,"column":30},"end":{"line":24,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":11},"end":{"line":25,"column":12}},"loc":{"start":{"line":25,"column":23},"end":{"line":39,"column":5}},"line":25},"3":{"name":"(anonymous_3)","decl":{"start":{"line":40,"column":14},"end":{"line":40,"column":15}},"loc":{"start":{"line":40,"column":31},"end":{"line":59,"column":5}},"line":40},"4":{"name":"(anonymous_4)","decl":{"start":{"line":60,"column":13},"end":{"line":60,"column":14}},"loc":{"start":{"line":60,"column":30},"end":{"line":77,"column":5}},"line":60},"5":{"name":"(anonymous_5)","decl":{"start":{"line":78,"column":16},"end":{"line":78,"column":17}},"loc":{"start":{"line":78,"column":33},"end":{"line":89,"column":5}},"line":78}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},{"start":{"line":28,"column":12},"end":{"line":30,"column":13}}],"line":28},"1":{"loc":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},{"start":{"line":43,"column":8},"end":{"line":45,"column":9}}],"line":43},"2":{"loc":{"start":{"line":48,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":48,"column":12},"end":{"line":51,"column":13}},{"start":{"line":48,"column":12},"end":{"line":51,"column":13}}],"line":48},"3":{"loc":{"start":{"line":65,"column":12},"end":{"line":68,"column":13}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":68,"column":13}},{"start":{"line":65,"column":12},"end":{"line":68,"column":13}}],"line":65}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":2,"8":2,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":0,"45":0,"46":1,"47":1,"48":1,"49":0,"50":0,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":0,"59":1},"f":{"0":1,"1":2,"2":2,"3":1,"4":1,"5":1},"b":{"0":[1,1],"1":[1,0],"2":[0,0],"3":[0,1]},"inputSourceMap":{"version":3,"file":"file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/Controller.ts","sources":["file:///home/marlon/Workshop/test/desafio_beon_tecnologia/src/controllers/Controller.ts"],"names":[],"mappings":";;AAGA,oCAAoD;AAEpD,MAAM,qBAAqB,GAAG,uBAAuB,CAAC;AAEtD,MAAe,UAAU;IAEZ;IACA;IAFX,YACW,OAAmB,EACnB,UAAyB;QADzB,YAAO,GAAP,OAAO,CAAY;QACnB,eAAU,GAAV,UAAU,CAAe;IACjC,CAAC;IAEK,MAAM,GAAG,KAAK,EAAE,KAAsB,EAAE,EAAE;QACjD,MAAM,MAAM,GAAK,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAExC,IAAI;YACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACjD,MAAM,EAAE,EAAE,EAAE,GAAG,MAAa,CAAC;YAE7B,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;YAEhD,OAAO,mBAAW,CAAC,OAAO,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;SAC/C;QAAC,OAAO,GAAG,EAAE;YACZ,MAAM,KAAK,GAAG,IAAA,mBAAW,EAAC,YAAY,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;YACrD,OAAO,mBAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACjC;IACH,CAAC,CAAC;IAEO,IAAI,GAAG,KAAK,IAAI,EAAE;QACzB,IAAI;YACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAEnD,IAAI,MAAM,EAAE;gBACV,OAAO,mBAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;aAC9C;YAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACzC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;YAE1C,OAAO,mBAAW,CAAC,OAAO,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;SAC/C;QAAC,OAAO,GAAG,EAAE;YACZ,MAAM,KAAK,GAAG,IAAA,mBAAW,EAAC,OAAO,EAAE,qBAAqB,CAAC,CAAC;YAC1D,OAAO,mBAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACjC;IACH,CAAC,CAAC;IAEO,OAAO,GAAG,KAAK,EAAE,KAAsB,EAAE,EAAE;QAClD,MAAM,EAAE,EAAE,EAAE,GAAG,KAAK,CAAC,cAAc,CAAC;QAEpC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QACzD,IAAI,MAAM,EAAE;YACV,OAAO,mBAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;SAC9C;QAED,IAAI;YACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAE9C,IAAI,CAAC,MAAM,EAAE;gBACX,MAAM,KAAK,GAAG,IAAA,mBAAW,EAAC,UAAU,EAAE,yBAAyB,CAAC,CAAC;gBAEjE,OAAO,mBAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACjC;YAED,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;YAErD,OAAO,mBAAW,CAAC,OAAO,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;SAC/C;QAAC,OAAO,GAAG,EAAE;YACZ,MAAM,KAAK,GAAG,IAAA,mBAAW,EAAC,OAAO,EAAE,qBAAqB,CAAC,CAAC;YAC1D,OAAO,mBAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACjC;IACH,CAAC,CAAC;IAEO,MAAM,GAAG,KAAK,EAAE,KAAsB,EAAE,EAAE;QACjD,MAAM,OAAO,GAAG,KAAK,CAAC,cAAc,CAAC,EAAE,CAAC;QACxC,MAAM,MAAM,GAAK,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAExC,IAAI;YACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YAC1D,IAAI,CAAC,MAAM,EAAE;gBACX,MAAM,KAAK,GAAG,IAAA,mBAAW,EAAC,UAAU,EAAE,yBAAyB,CAAC,CAAC;gBAEjE,OAAO,mBAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACjC;YAED,MAAM,EAAE,EAAE,EAAE,GAAG,MAAa,CAAC;YAE7B,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;YAErD,OAAO,mBAAW,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;SACzC;QAAC,OAAO,GAAG,EAAE;YACZ,MAAM,KAAK,GAAG,IAAA,mBAAW,EAAC,OAAO,EAAE,qBAAqB,CAAC,CAAC;YAC1D,OAAO,mBAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACjC;IACH,CAAC,CAAC;IAEO,SAAS,GAAG,KAAK,EAAE,KAAsB,EAAE,EAAE;QACpD,MAAM,EAAE,EAAE,EAAE,GAAG,KAAK,CAAC,cAAc,CAAC;QACpC,IAAI;YACF,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YAE9B,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;YACpC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAE9B,OAAO,mBAAW,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;SACzC;QAAC,OAAO,GAAG,EAAE;YACZ,OAAO,mBAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SAC/B;IACH,CAAC,CAAC;CACH;AAED,kBAAe,UAAU,CAAC","sourcesContent":["import { APIGatewayEvent } from 'aws-lambda';\nimport { Service } from '../services';\nimport CacheRedis from '../middlewares/CacheRedis';\nimport { CreateError, MessageUtil } from '../utils';\n\nconst INTERNAL_SERVER_ERROR = 'Internal Server Error';\n\nabstract class Controller<T> {\n  constructor(\n    readonly service: Service<T>,\n    readonly cacheRedis: CacheRedis<T>,\n  ) {}\n\n  readonly create = async (event: APIGatewayEvent) => {\n    const params:T = JSON.parse(event.body);\n\n    try {\n      const result = await this.service.create(params);\n      const { id } = result as any;\n\n      this.cacheRedis.set(`getOne:${id}`, result, 60);\n\n      return MessageUtil.success('created', result);\n    } catch (err) {\n      const error = CreateError('badRequest', err.message);\n      return MessageUtil.error(error);\n    }\n  };\n\n  readonly find = async () => {\n    try {\n      const cached = await this.cacheRedis.get('getAll');\n\n      if (cached) {\n        return MessageUtil.success('cached', cached);\n      }\n\n      const result = await this.service.read();\n      this.cacheRedis.set('getAll', result, 60);\n\n      return MessageUtil.success('success', result);\n    } catch (err) {\n      const error = CreateError('error', INTERNAL_SERVER_ERROR);\n      return MessageUtil.error(error);\n    }\n  };\n\n  readonly findOne = async (event: APIGatewayEvent) => {\n    const { id } = event.pathParameters;\n\n    const cached = await this.cacheRedis.get(`getOne:${id}`);\n    if (cached) {\n      return MessageUtil.success('cached', cached);\n    }\n\n    try {\n      const result = await this.service.readOne(id);\n        \n      if (!result) {\n        const error = CreateError('notFound', 'The data was not found!');\n\n        return MessageUtil.error(error);\n      }\n\n      this.cacheRedis.set(`getOne:${id}`, result, 60 * 30);\n\n      return MessageUtil.success('success', result);\n    } catch (err) {\n      const error = CreateError('error', INTERNAL_SERVER_ERROR);\n      return MessageUtil.error(error);\n    }\n  };\n\n  readonly update = async (event: APIGatewayEvent) => {\n    const eventId = event.pathParameters.id;\n    const params:T = JSON.parse(event.body);\n\n    try {\n      const result = await this.service.update(eventId, params);\n      if (!result) {\n        const error = CreateError('notFound', 'The data was not found!');\n\n        return MessageUtil.error(error);\n      }\n\n      const { id } = result as any;\n\n      this.cacheRedis.set(`getOne:${id}`, result, 60 * 30);\n\n      return MessageUtil.success('noContent');\n    } catch (err) {\n      const error = CreateError('error', INTERNAL_SERVER_ERROR);\n      return MessageUtil.error(error);\n    }\n  };\n\n  readonly deleteOne = async (event: APIGatewayEvent) => {\n    const { id } = event.pathParameters;\n    try {\n      await this.service.delete(id);\n\n      this.cacheRedis.del(`getOne:${id}`);\n      this.cacheRedis.del('getAll');\n\n      return MessageUtil.success('noContent');\n    } catch (err) {\n      return MessageUtil.error(err);\n    }\n  };\n}\n\nexport default Controller;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"21c914956177fa6e3dbbde53ee57bb285878cb9e"}}